<UserControl
    x:Class="CnV.CityStats"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cnv="using:CnV"
    xmlns:tk="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	Margin="0"
	HorizontalAlignment="Stretch"
	VerticalAlignment="Stretch"
	Background="{x:Null}"
    mc:Ignorable="d">

	<ScrollViewer  x:Name="scroll"
					Background="{x:Null}"   HorizontalScrollMode="Disabled" VerticalScrollMode="Auto" 
				  MinZoomFactor="0.5" MaxZoomFactor="2" ZoomMode="Enabled" 
				  HorizontalAlignment="Stretch"
				   VerticalScrollBarVisibility="Auto"
				  HorizontalContentAlignment="Stretch"
				   SizeChanged="scroll_SizeChanged"
				>
		<StackPanel x:Name="stackPanel"  Margin="2" Padding="2" Background="{x:Null}"  >
			<Expander Header="Incoming" Expanding="Expander_Expanding" MinHeight="24" Padding="0" Visibility="Collapsed"  Margin="0.0" BorderThickness="0" Background="{x:Null}" x:Name="expIncoming"  >
			</Expander>
			<Expander  Expanding="Expander_Expanding" MinHeight="22"  Padding="0" Margin="0"  Background="{x:Null}"  x:Name="expResource"  >
				<Expander.Header   >
					<Border Background="#40100000" BorderThickness="0" Padding="4" CornerRadius="4" >
						<TextBlock Text ="Resources" Margin="0"   Style="{StaticResource TextBlockMedium}"    />
					</Border>
				</Expander.Header>
				<tk:WrapPanel Orientation="Horizontal" Background="{x:Null}" HorizontalSpacing="4" VerticalSpacing="4" >
					<StackPanel CornerRadius="4" Orientation="Vertical"  Padding="4"   Width="90" Background="#B4020000"   >
						<TextBlock  x:Name="res0" x:FieldModifier="public" HorizontalTextAlignment="Right" Style="{StaticResource TextBlockMedium}" />
						<TextBlock Grid.Row="1" x:Name="prod0" x:FieldModifier="public"  HorizontalTextAlignment="Right" Style="{StaticResource TextBlockSmall}" />
					</StackPanel>
					<StackPanel CornerRadius="4"  Margin="0" Padding="4" Width="90" Background="#B0200000" >
						<TextBlock  HorizontalTextAlignment="Right"  Style="{StaticResource TextBlockMedium}"  />
						<TextBlock Grid.Row="1"   HorizontalTextAlignment="Right" Style="{StaticResource TextBlockSmall}" />
					</StackPanel>
					<StackPanel CornerRadius="4"  Margin="0" Padding="4" Width="90" Background="#B0200000"  >
						<TextBlock  HorizontalTextAlignment="Right" Style="{StaticResource TextBlockMedium}" />
						<TextBlock   Grid.Row="1" HorizontalTextAlignment="Right" Style="{StaticResource TextBlockSmall}"/>
					</StackPanel>
					<StackPanel CornerRadius="4"   Margin="0" Padding="4" Width="90" Background="#B0200000"  >
						<TextBlock   HorizontalTextAlignment="Right" Style="{StaticResource TextBlockMedium}" />
						<TextBlock   Grid.Row="1" HorizontalTextAlignment="Right" Style="{StaticResource TextBlockSmall}" />
					</StackPanel>
				</tk:WrapPanel>
			</Expander>
			<Expander  MinHeight="24" FontSize="12" BorderThickness="0" Expanding="Expander_Expanding" x:Name="expBuildQueue" Padding="0"  Margin="0.0" Background="{x:Null}"  >
				<Expander.Header   >
					<Border Background="#B0200000" BorderThickness="0" Padding="4" CornerRadius="4" >
						<TextBlock Text ="Build Queue" Margin="0"  Style="{StaticResource TextBlockMedium}" HorizontalAlignment="Right"   />
					</Border>
				</Expander.Header>
				<ListView x:Name="InAppNote" x:FieldModifier="public"  Margin="0" Padding="0" Background="#40100000"
                   
						  MaxHeight="200"  >
					<ListView.ItemTemplate>
						<DataTemplate  x:DataType="x:String"  >
							<tk:MarkdownTextBlock  x:Name="message" Text="{x:Bind ToString(), Mode=OneTime}"  Margin="1"  Padding="0,0,0,0"    
                                               IsTextSelectionEnabled="True"
											  FontSize="{StaticResource SmallFontSize}"
											 FontFamily="Bahnschrift,Segoe Fluent Icons"
                                              TextWrapping="Wrap" 
											   LinkClicked="{x:Bind cnv:Note.MarkDownLinkClicked}"  Background="Transparent"  />

						</DataTemplate>
					</ListView.ItemTemplate>
					<!-- The ItemsStackPanel must be edited to update the following two properties -->
					<!-- These properties allow the list to grow from the bottom -->
					<ListView.ItemsPanel>
						<ItemsPanelTemplate>
							<ItemsStackPanel ItemsUpdatingScrollMode="KeepLastItemInView" 
									
                            VerticalAlignment="Center"/>
						</ItemsPanelTemplate>
					</ListView.ItemsPanel>
					<!-- This setter property is created so ListViewItems correctly align to the left or right. -->
					<ListView.ItemContainerStyle>
						<Style TargetType="ListViewItem">
							<Setter Property="Margin" Value="1" />
							<Setter Property="Padding" Value="0" />
							<Setter Property="VerticalAlignment" Value="Center"/>
							<Setter Property="VerticalContentAlignment" Value="Center"/>
							<Setter Property="Background" Value="#58003000"/>
						</Style>
					</ListView.ItemContainerStyle>
					<x:String>"hello"</x:String>
					<x:String>"There"</x:String>
				</ListView>
			</Expander>
			
				<Expander  MinHeight="24" FontSize="12" BorderThickness="0" Expanding="Expander_Expanding" x:Name="expBuildings" Padding="0" Margin="0.0" Background="{x:Null}"  >
				<Expander.Header   >
					<Border Background="#B0200000" BorderThickness="0" Padding="4" CornerRadius="4" >
						<TextBlock Text ="Buildings" Margin="0"  Style="{StaticResource TextBlockMedium}"   />
					</Border>
				</Expander.Header>
				<GridView x:Name="buildingCountGrid" Background="{x:Null}" HorizontalAlignment="Stretch" SelectionMode="Multiple" IsMultiSelectCheckBoxEnabled="False" >
					<GridView.ItemTemplate>
						<DataTemplate x:DataType="cnv:BuildingCountAndBrush">
							<Grid >
								<Grid.RowDefinitions>
									<RowDefinition Height="auto" />
									<RowDefinition  />
								</Grid.RowDefinitions>
								<Rectangle Fill="{x:Bind brush, Mode=OneTime}"
                                                   Width="64" Height="64" />
								<TextBlock Grid.Row="1"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Text="{x:Bind count, Mode=OneTime}" />
							</Grid>
						</DataTemplate>
					</GridView.ItemTemplate>
					<GridView.ItemsPanel>
						<ItemsPanelTemplate>
							<ItemsWrapGrid 
                                                       Orientation="Horizontal" />
						</ItemsPanelTemplate>
					</GridView.ItemsPanel>
				</GridView>
			</Expander>
			<Expander Header="Enlistment" Expanding="Expander_Expanding" x:Name="expEnlistment" Background="{x:Null}"  >

			</Expander>
			<Expander Header="Commands" Expanding="Expander_Expanding" x:Name="expCommands" Background="{x:Null}"  >

			</Expander>
			<Expander Header="Reinforcements" Expanding="Expander_Expanding" x:Name="expReinforcements" Background="{x:Null}"  >

			</Expander>
			<Expander Header="Trades" Expanding="Expander_Expanding" x:Name="expTrades" Background="{x:Null}"  >

			</Expander>

		</StackPanel>
	</ScrollViewer>
</UserControl>
