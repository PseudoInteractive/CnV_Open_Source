<Page xmlns:my="using:Microsoft.UI.Xaml.Controls"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tg="using:Telerik.UI.Xaml.Controls.Grid"
    xmlns:gridCommands="using:Telerik.UI.Xaml.Controls.Grid.Commands"
    xmlns:model="using:COTG.Models"
    x:Class="COTG.Views.MainPage"
    Style="{StaticResource PageStyle}"
    mc:Ignorable="d"
    NavigationCacheMode="Required"
    Background="{x:Null}">
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition/>
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition/>
		</Grid.RowDefinitions>
        <tg:RadDataGrid ColumnDataOperationsMode="Flyout"
                        x:Name="cityGrid"
                         RowDetailsDisplayMode="Single"
                        ItemsSource="{x:Bind cities, Mode=OneWay}"
                        AutoGenerateColumns="False" CanDrag="True"
                        SelectionMode ="Extended"
                        SelectionUnit="Cell"
                         >
            <tg:RadDataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <tg:RadDataGrid ItemsSource="{Binding Details}"
                              UserGroupMode="Disabled"
                              AutoGenerateColumns="False">
                        <tg:RadDataGrid.Columns>
                            <tg:DataGridTemplateColumn SizeMode="Fixed" Width="40">
                                <tg:DataGridTemplateColumn.CellContentTemplate>
                                    <DataTemplate>
                                        <CheckBox Margin="10" IsChecked="{Binding HasRowDetails, Mode=TwoWay}" Click="OnCheckBoxClick"/>
                                    </DataTemplate>
                                </tg:DataGridTemplateColumn.CellContentTemplate>
                            </tg:DataGridTemplateColumn>
                            <tg:DataGridTextColumn PropertyName="owner"/>
                            <tg:DataGridTextColumn PropertyName="alliance"/>
                            <tg:DataGridDateColumn PropertyName="lastAccessed"/>
                            <tg:DataGridTextColumn PropertyName="notes"/>
                        </tg:RadDataGrid.Columns>
                    </tg:RadDataGrid>
                </DataTemplate>
            </tg:RadDataGrid.RowDetailsTemplate>
            <tg:RadDataGrid.Commands>
                <model:GridCellTapCommand />
            </tg:RadDataGrid.Commands>
            <tg:RadDataGrid.Columns>
                <tg:DataGridTextColumn PropertyName="name" />
                <tg:DataGridTextColumn PropertyName="xy" />
                <tg:DataGridDateColumn PropertyName="lastAccessed" />
            </tg:RadDataGrid.Columns>
		</tg:RadDataGrid>
	</Grid>
</Page>
