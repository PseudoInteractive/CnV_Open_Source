<local:UserTab
    x:Class="COTG.Views.AttackTab"
    Tag="Attack"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:game="using:COTG.Game"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:cotg="using:COTG"
      xmlns:my="using:Microsoft.UI.Xaml.Controls"
      xmlns:tk="using:Microsoft.Toolkit.Uwp.UI.Controls"
      xmlns:local="using:COTG.Views"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="64" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" >
            <Button Content="Assign Attacks" VerticalAlignment="Center" Margin="4"
                          Width="60" HorizontalAlignment="Center" FontSize="12" Style="{ThemeResource ButtonRevealStyle}"
                      Click="AssignAttacks_Click" />
            <Button Content="X Selected" VerticalAlignment="Center" Margin="4"
                          Width="60" HorizontalAlignment="Center" FontSize="12" Style="{ThemeResource ButtonRevealStyle}"
                      Click="RemoveSelected_Click" />
            <Button Content="+Senny" VerticalAlignment="Center" Margin="4"
                          Width="60" HorizontalAlignment="Center" FontSize="12" Style="{ThemeResource ButtonRevealStyle}"
                      Click="AddSenator_Click" />
            <Button Content="+Fake" VerticalAlignment="Center" Margin="4"
                          Width="60" HorizontalAlignment="Center" FontSize="12" Style="{ThemeResource ButtonRevealStyle}"
                      Click="AddFake_Click" />
            <Button Content="Sort" VerticalAlignment="Center" Margin="4"
                          Width="60" HorizontalAlignment="Center" FontSize="12" Style="{ThemeResource ButtonRevealStyle}"
                      Click="SortAttacks" />
            <Border  Margin="4" Background="#FF103030" VerticalAlignment="Center">
                <TextBlock x:Name="sendAtUI"  VerticalAlignment="Center" Text="{x:Bind local:AttackTab.time,Mode=OneWay,Converter={StaticResource DateTimeConverter}}"
                           Width="100" HorizontalAlignment="Center" FontSize="12" HorizontalTextAlignment="Center" PointerPressed="SendAtTapped"
                           ToolTipService.ToolTip="Time at which attacks arrive." />
            </Border>
        </StackPanel>
        <tk:DataGrid x:Name="attackGrid" x:FieldModifier="public"
                        AutoGenerateColumns="False"
                        ItemsSource="{x:Bind local:AttackTab.attacks, Mode=OneWay}"
                        RowHeight="24"
                     Grid.Row="1"
                     SelectionMode="Extended"
                     RowDetailsVisibilityMode="Collapsed"
                     CanUserReorderColumns="True"
                    CanUserSortColumns="True"
             
                     GridLinesVisibility="All"
                     AlternatingRowBackground="#FF301030"
                    
                     >
            <tk:DataGrid.Columns>
                <tk:DataGridTextColumn Header="Player" Binding="{Binding player, Mode=OneTime}"
                                        />
                <tk:DataGridTemplateColumn Header="Target" >
                    <tk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate x:DataType="game:Attack">
                            <HyperlinkButton Content="{x:Bind xy}" Tapped="AttackCoord_Tapped" HorizontalAlignment="Center" FontSize="14" HorizontalContentAlignment="Center"
                                                           ToolTipService.ToolTip="The target to attack"
                                             
                                             />
                        </DataTemplate>
                    </tk:DataGridTemplateColumn.CellTemplate>
                </tk:DataGridTemplateColumn>
                <tk:DataGridComboBoxColumn  Header="Type" 
                                        Binding="{Binding type,Mode=OneTime}"
                                            ItemsSource="{x:Bind game:AttackType.types , Mode=OneTime}"
                                        
                                             DisplayMemberPath="name"
                                            
                                             />
                <tk:DataGridCheckBoxColumn Header="Fake" Binding="{Binding fake, Mode=OneTime}"
                                        />
                <tk:DataGridTemplateColumn Header="Remove" >
                    <tk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate x:DataType="game:Attack">
                            <HyperlinkButton Content="Remove" Tapped="AttackRemove_Tapped" HorizontalAlignment="Center" FontSize="12" HorizontalContentAlignment="Center"
                                                           ToolTipService.ToolTip="Remove this Attack"
                                             />
                        </DataTemplate>
                    </tk:DataGridTemplateColumn.CellTemplate>
                </tk:DataGridTemplateColumn>
            </tk:DataGrid.Columns>
        </tk:DataGrid>
        <tk:GridSplitter Grid.Row="2"
                         ResizeDirection="Rows"
                                                 Height="11"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Top"
                           Background="Transparent"
                    >
            <tk:GridSplitter.Element>
                <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE76F;"
                     IsHitTestVisible="False"    />
            </tk:GridSplitter.Element>
        </tk:GridSplitter>
        <tk:DataGrid x:Name="targetGrid" x:FieldModifier="public"
                        AutoGenerateColumns="False"
                     Grid.Row="2"
                        ItemsSource="{x:Bind local:AttackTab.targets, Mode=OneWay}"
                        RowHeight="24"
                     Margin="0,14,0,0"
                     GridLinesVisibility="All"
                      SelectionMode="Extended"
                     AlternatingRowBackground="#FF103020"
                     >
            <tk:DataGrid.Columns>
                <tk:DataGridTemplateColumn Header="Icon" >
                    <tk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate x:DataType="game:Spot">
                            <Image Source= "{x:Bind icon,Mode=OneTime}" HorizontalAlignment="Center" Stretch= "UniformToFill"
                                   VerticalAlignment="Center"   />
                        </DataTemplate>
                    </tk:DataGridTemplateColumn.CellTemplate>
                </tk:DataGridTemplateColumn>
                <tk:DataGridTemplateColumn Header="xy" >
                    <tk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate x:DataType="game:Spot">
                            <HyperlinkButton Content="{x:Bind xy, Mode=OneTime}" Tapped="TargetCoord_Tapped" HorizontalAlignment="Center" FontSize="12" HorizontalContentAlignment="Center"
                                                           ToolTipService.ToolTip="The target to attack"
                                             
                                             />
                        </DataTemplate>
                    </tk:DataGridTemplateColumn.CellTemplate>
                </tk:DataGridTemplateColumn>
                <tk:DataGridTextColumn Header="Player" Binding="{Binding player, Mode=OneTime}" />
                <tk:DataGridTextColumn Header="Cluster" Binding="{Binding attackCluster, Mode=OneTime}" />
                <tk:DataGridTextColumn Header="City" Binding="{Binding cityName, Mode=OneTime}" />
                <tk:DataGridTextColumn Header="Alliance" Binding="{Binding alliance, Mode=OneTime}" />
                <tk:DataGridTemplateColumn Header="Remove" >
                    <tk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate x:DataType="game:Spot">
                            <HyperlinkButton Content="Remove" Tapped="TargetRemove_Tapped" HorizontalAlignment="Center" FontSize="12" HorizontalContentAlignment="Center"
                                                           ToolTipService.ToolTip="Remove this Target"
                                             />
                        </DataTemplate>
                    </tk:DataGridTemplateColumn.CellTemplate>
                </tk:DataGridTemplateColumn>
                <tk:DataGridTextColumn Header="Attackers" Binding="{Binding attackers, Mode=OneWay}" />
            </tk:DataGrid.Columns>
        </tk:DataGrid>
    </Grid>
</local:UserTab>
