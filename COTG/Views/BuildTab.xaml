<views:UserTab x:Class="COTG.Views.BuildTab"
               Tag="Build"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
               xmlns:game="using:COTG.Game"
               xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
               xmlns:cotg="using:COTG"
               xmlns:winui="using:Windows.UI.Xaml.Controls"
               xmlns:tk="using:Microsoft.Toolkit.Uwp.UI.Controls"
               xmlns:views="using:COTG.Views"
			   xmlns:wuxdata="using:Windows.UI.Xaml.Data"
			   TabNavigation="Once"
			  IsTabStop="True"
               mc:Ignorable="d">
	<views:UserTab.Resources>
	
		<DataTemplate x:Key="ZoomedInTemplate" x:DataType="views:BuildOpView">
			<winui:TreeViewItem>
			<StackPanel Orientation="Horizontal" Margin="4" MinWidth="200">
				<Canvas Background="{x:Bind brush}" Width="32" Height="32" />
				<TextBlock Text="{x:Bind op}" />
			</StackPanel>
			</winui:TreeViewItem>
		</DataTemplate>

		<DataTemplate x:Key="ZoomedInGroupHeaderTemplate" x:DataType="views:BuildQueueView">
			<winui:TreeViewItem ItemsSource="{x:Bind queue}" IsExpanded="True">
				<StackPanel Orientation="Horizontal" Margin="4">
					<Image Source="{x:Bind icon}"  Width="48" Height="48" />
					<TextBlock Text="{x:Bind title}"/>
				</StackPanel>
			</winui:TreeViewItem>
		</DataTemplate>

		<views:BuildItemTemplateSelector x:Key="BuildItemTemplateSelector"
        cityTemplate="{StaticResource ZoomedInGroupHeaderTemplate}"
        opTemplate="{StaticResource ZoomedInTemplate}" />

	</views:UserTab.Resources>



	<Grid >
		<Grid.RowDefinitions>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>
		<StackPanel Orientation="Horizontal" BorderThickness="2" >
			<Button Margin="4" Content="Clear Queue" Click="ClearQueue" Style="{StaticResource ButtonSmall}" />
			<Button Margin="4" Content="Cancel Selected" Click="ClearSelected" Style="{StaticResource ButtonSmall}" />
		</StackPanel>
		<winui:TreeView Grid.Row="1" x:Name="zoom" SelectionMode="Multiple" IsTabStop="True" CanBeScrollAnchor="True" 
 TabNavigation="Once" CanDragItems="True" AllowDrop="True" ItemTemplateSelector="{StaticResource BuildItemTemplateSelector}"
						ItemsSource="{x:Bind cities}" ItemInvoked="zoom_ItemInvoked" VerticalAlignment="Top" 
						>
		</winui:TreeView>

	</Grid>
</views:UserTab>
